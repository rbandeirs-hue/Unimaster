{% extends "base.html" %}
{% block title %}Cadastrar Novo Usu치rio{% endblock %}

{% block content %}
<div class="container my-4 my-md-5">
  <div class="card shadow-lg border-0 rounded-3 mx-auto" style="max-width: 650px;">
    <div class="card-header bg-primary text-white text-center py-3 rounded-top-3">
      <h5 class="mb-0 fw-bold d-flex align-items-center justify-content-center flex-wrap">
        <i class="bi bi-person-plus-fill me-2"></i> Cadastro de Novo Usu치rio
      </h5>
    </div>

    <div class="card-body p-4 p-md-5">
      <p class="text-muted text-center mb-4">
        Preencha os dados abaixo para criar uma nova conta de acesso ao sistema.
      </p>

      <form method="POST" action="{{ url_for('usuarios.cadastro_usuario') }}" class="needs-validation" novalidate>

        <!-- Nome -->
        <div class="mb-3">
          <label for="nome" class="form-label fw-semibold">Nome Completo</label>
          <input type="text" class="form-control" id="nome" name="nome"
                 placeholder="Ex: Jo칚o da Silva" required>
          <div class="invalid-feedback">Informe o nome completo.</div>
        </div>

        <!-- Email -->
        <div class="mb-3">
          <label for="email" class="form-label fw-semibold">Email</label>
          <input type="email" class="form-control" id="email" name="email"
                 placeholder="exemplo@academia.com" required>
          <div class="form-text">Este ser치 o login do usu치rio.</div>
          <div class="invalid-feedback">Informe um email v치lido.</div>
        </div>

        <!-- Senha e Tipo -->
        <div class="row g-3 mb-3">
          <div class="col-12 col-md-6">
            <label for="senha" class="form-label fw-semibold">Senha</label>
            <input type="password" class="form-control" id="senha" name="senha" required>
            <div class="invalid-feedback">Defina uma senha.</div>
          </div>

          <div class="col-12 col-md-6">
            <label for="tipo" class="form-label fw-semibold">Tipo de Usu치rio</label>
            <select class="form-select" id="tipo" name="tipo" required>
              <option value="" disabled selected>Selecione o tipo</option>
              <option value="Admin">Administrador</option>
              <option value="Coordenador">Coordenador / Supervisor</option>
              <option value="Professor">Professor</option>
              <option value="Instrutor">Instrutor</option>
              <option value="Aluno">Aluno</option>
            </select>
            <div class="invalid-feedback">Selecione o tipo de usu치rio.</div>
          </div>
        </div>

        <!-- Telefone -->
        <div class="mb-3">
          <label for="telefone" class="form-label fw-semibold">Telefone (Opcional)</label>
          <input type="tel" class="form-control" id="telefone" name="telefone"
                 placeholder="(XX) XXXXX-XXXX" pattern="\\(\\d{2}\\) \\d{4,5}-\\d{4}">
        </div>

        <!-- Bot칫es -->
        <div class="d-flex flex-column flex-md-row justify-content-center align-items-center gap-3 mt-4">
          <button type="submit" class="btn btn-primary w-100 w-md-auto btn-lg">
            <i class="bi bi-save me-2"></i> Cadastrar Usu치rio
          </button>
          <a href="{{ back_url }}" class="btn btn-outline-secondary w-100 w-md-auto btn-lg">
            <i class="bi bi-arrow-left-circle me-2"></i> Voltar
          </a>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
  /* 游댳 Ajustes para telas pequenas */
  @media (max-width: 576px) {
    .card {
      border-radius: 0 !important;
      box-shadow: none !important;
    }
    .card-body {
      padding: 1.5rem !important;
    }
    h5 {
      font-size: 1.2rem;
      text-align: center;
    }
    .btn-lg {
      font-size: 1rem;
      padding: 0.75rem 1rem;
    }
    .form-control,
    .form-select {
      font-size: 1rem;
      padding: 0.6rem 0.75rem;
    }
  }

  /* 游댳 Efeitos visuais */
  .form-control:focus, .form-select:focus {
    box-shadow: 0 0 0 0.2rem rgba(13,110,253,0.25);
  }

  .form-label {
    color: #343a40;
  }

  /* 游댳 Realce de valida칞칚o */
  .was-validated .form-control:invalid,
  .was-validated .form-select:invalid {
    border-color: #dc3545;
  }

  .was-validated .form-control:valid,
  .was-validated .form-select:valid {
    border-color: #198754;
  }
</style>
{% endblock %}

{% block extra_js %}
<script>
  // Valida칞칚o Bootstrap customizada
  (function () {
    'use strict';
    const forms = document.querySelectorAll('.needs-validation');
    Array.from(forms).forEach(function (form) {
      form.addEventListener('submit', function (event) {
        if (!form.checkValidity()) {
          event.preventDefault();
          event.stopPropagation();
        }
        form.classList.add('was-validated');
      }, false);
    });
  })();
</script>
{% endblock %}
