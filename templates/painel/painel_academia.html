{% extends "base.html" %}
{% block title %}Gerenciamento — {{ academia.nome if academia else 'Academia' }}{% endblock %}
{% block content %}
<div class="container mt-5">
    <div class="mb-4">
        {% if academias|length > 1 %}
        <form method="GET" class="mb-3">
            <label class="form-label small fw-semibold">Academia:</label>
            <select name="academia_id" class="form-select form-select-sm d-inline-block w-auto" onchange="this.form.submit()">
                {% for ac in academias %}
                <option value="{{ ac.id }}" {% if ac.id == academia_id %}selected{% endif %}>{{ ac.nome }}</option>
                {% endfor %}
            </select>
        </form>
        {% endif %}
        <h2 class="h4 fw-bold text-primary">Gerenciamento — {{ academia.nome if academia else 'Academia' }}</h2>
        <p class="text-muted mb-0">Acesse os módulos da academia.</p>
    </div>

    <div class="row g-4">
        <!-- Usuários -->
        <div class="col-xl-3 col-lg-4 col-md-6">
            <a href="{{ url_for('academia.lista_usuarios', academia_id=academia_id) }}" class="card-action-link text-decoration-none">
                <div class="card h-100 shadow-sm border-primary">
                    <div class="card-body text-center p-4">
                        <i class="bi bi-person-lines-fill display-5 mb-3 text-primary"></i>
                        <h5 class="card-title fw-bold">Usuários</h5>
                        <p class="card-text small text-muted mb-0">Usuários vinculados à academia.</p>
                    </div>
                </div>
            </a>
        </div>

        <!-- Alunos -->
        <div class="col-xl-3 col-lg-4 col-md-6">
            <a href="{{ url_for('alunos.lista_alunos', academia_id=academia_id) }}" class="card-action-link text-decoration-none">
                <div class="card h-100 shadow-sm border-success">
                    <div class="card-body text-center p-4">
                        <i class="bi bi-people-fill display-5 mb-3 text-success"></i>
                        <h5 class="card-title fw-bold">Alunos</h5>
                        <p class="card-text small text-muted mb-0">Lista e gestão de alunos.</p>
                    </div>
                </div>
            </a>
        </div>

        <!-- Turmas -->
        <div class="col-xl-3 col-lg-4 col-md-6">
            <a href="{{ url_for('turmas.lista_turmas', academia_id=academia_id) }}" class="card-action-link text-decoration-none">
                <div class="card h-100 shadow-sm border-info">
                    <div class="card-body text-center p-4">
                        <i class="bi bi-collection-fill display-5 mb-3 text-info"></i>
                        <h5 class="card-title fw-bold">Turmas</h5>
                        <p class="card-text small text-muted mb-0">Turmas e horários.</p>
                    </div>
                </div>
            </a>
        </div>

        <!-- Professores -->
        {% if academia %}
        <div class="col-xl-3 col-lg-4 col-md-6">
            <a href="{{ url_for('professores.lista', academia_id=academia.id) }}" class="card-action-link text-decoration-none">
                <div class="card h-100 shadow-sm border-warning">
                    <div class="card-body text-center p-4">
                        <i class="bi bi-person-badge-fill display-5 mb-3 text-warning"></i>
                        <h5 class="card-title fw-bold">Professores</h5>
                        <p class="card-text small text-muted mb-0">Gestão de professores.</p>
                    </div>
                </div>
            </a>
        </div>
        {% endif %}

        <!-- Presenças -->
        <div class="col-xl-3 col-lg-4 col-md-6">
            <a href="{{ url_for('presencas.registro_presenca', academia_id=academia_id) }}" class="card-action-link text-decoration-none">
                <div class="card h-100 shadow-sm border-secondary">
                    <div class="card-body text-center p-4">
                        <i class="bi bi-clipboard-check-fill display-5 mb-3 text-secondary"></i>
                        <h5 class="card-title fw-bold">Presenças</h5>
                        <p class="card-text small text-muted mb-0">Registro e ata de presença.</p>
                    </div>
                </div>
            </a>
        </div>

        <!-- Financeiro -->
        {% if current_user.has_role('gestor_academia') or current_user.has_role('admin') or current_user.has_role('gestor_federacao') or current_user.has_role('gestor_associacao') %}
        <div class="col-xl-3 col-lg-4 col-md-6">
            <a href="{{ url_for('financeiro.dashboard', academia_id=academia_id) }}" class="card-action-link text-decoration-none">
                <div class="card h-100 shadow-sm border-success">
                    <div class="card-body text-center p-4">
                        <i class="bi bi-cash-coin display-5 mb-3 text-success"></i>
                        <h5 class="card-title fw-bold">Financeiro</h5>
                        <p class="card-text small text-muted mb-0">Receitas, despesas e descontos.</p>
                    </div>
                </div>
            </a>
        </div>
        {% endif %}
    </div>
</div>
<style>
.card-action-link .card { transition: transform 0.2s, box-shadow 0.2s; }
.card-action-link:hover .card { transform: translateY(-4px); box-shadow: 0 0.5rem 1rem rgba(0,0,0,0.1) !important; }
</style>
{% endblock %}
