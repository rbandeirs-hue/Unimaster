{% extends "base.html" %}
{% block title %}Dash — Academia{% endblock %}
{% block content %}
<div class="container mt-4 painel-academia-dash">
    {% if academias|length > 1 %}
    <form method="GET" class="mb-3">
        <label class="form-label small fw-semibold">Academia:</label>
        <select name="academia_id" class="form-select form-select-sm d-inline-block w-auto" onchange="this.form.submit()">
            {% for ac in academias %}
            <option value="{{ ac.id }}" {% if ac.id == academia_id %}selected{% endif %}>{{ ac.nome }}</option>
            {% endfor %}
        </select>
    </form>
    {% endif %}
    <div class="text-center mb-4">
        <h2 class="fw-bold text-primary">Dash</h2>
        <p class="text-muted">Resumo da academia</p>
    </div>

    <div class="row g-4">
        <div class="col-12 col-sm-6 col-lg-4 col-xl-3">
            <div class="card shadow-sm border-primary card-hover painel-atalho-card h-100">
                <div class="card-body text-center py-4 px-4 d-flex flex-column align-items-center justify-content-center">
                    <i class="bi bi-people-fill fs-1 mb-2 text-primary"></i>
                    <h6 class="fw-bold mb-2">Alunos</h6>
                    <span class="display-4 fw-bold text-primary">{{ stats.get('alunos', 0) }}</span>
                </div>
            </div>
        </div>
        <div class="col-12 col-sm-6 col-lg-4 col-xl-3">
            <div class="card shadow-sm border-info card-hover painel-atalho-card h-100">
                <div class="card-body text-center py-4 px-4 d-flex flex-column align-items-center justify-content-center">
                    <i class="bi bi-collection-fill fs-1 mb-2 text-info"></i>
                    <h6 class="fw-bold mb-2 fs-6">Turmas</h6>
                    <span class="display-4 fw-bold text-info">{{ stats.get('turmas', 0) }}</span>
                </div>
            </div>
        </div>
        <div class="col-12 col-sm-6 col-lg-4 col-xl-3">
            <div class="card shadow-sm border-warning card-hover painel-atalho-card h-100">
                <div class="card-body text-center py-4 px-4 d-flex flex-column align-items-center justify-content-center">
                    <i class="bi bi-person-badge-fill fs-1 mb-2 text-warning"></i>
                    <h6 class="fw-bold mb-2">Professores</h6>
                    <span class="display-4 fw-bold text-warning">{{ stats.get('professores', 0) }}</span>
                </div>
            </div>
        </div>
        <div class="col-12 col-sm-6 col-lg-4 col-xl-3">
            <div class="card shadow-sm border-success card-hover painel-atalho-card h-100">
                <div class="card-body text-center py-4 px-4 d-flex flex-column align-items-center justify-content-center">
                    <i class="bi bi-cash-coin fs-1 mb-2 text-success"></i>
                    <h6 class="fw-bold mb-2">Receitas (mês)</h6>
                    <span class="h4 fw-bold text-success">R$ {{ "%.2f" % (stats.get('receitas_mes', 0) or 0) }}</span>
                </div>
            </div>
        </div>
        <div class="col-12 col-sm-6 col-lg-4 col-xl-3">
            <div class="card shadow-sm border-danger card-hover painel-atalho-card h-100">
                <div class="card-body text-center py-4 px-4 d-flex flex-column align-items-center justify-content-center">
                    <i class="bi bi-cash-stack fs-1 mb-2 text-danger"></i>
                    <h6 class="fw-bold mb-2">Despesas (mês)</h6>
                    <span class="h4 fw-bold text-danger">R$ {{ "%.2f" % (stats.get('despesas_mes', 0) or 0) }}</span>
                </div>
            </div>
        </div>
        <div class="col-12 col-sm-6 col-lg-4 col-xl-3">
            {% set saldo = (stats.get('receitas_mes', 0) or 0) - (stats.get('despesas_mes', 0) or 0) %}
            <div class="card shadow-sm {{ 'border-success' if saldo >= 0 else 'border-warning' }} card-hover painel-atalho-card h-100">
                <div class="card-body text-center py-4 px-4 d-flex flex-column align-items-center justify-content-center">
                    <i class="bi bi-graph-up-arrow fs-1 mb-2 {{ 'text-success' if saldo >= 0 else 'text-warning' }}"></i>
                    <h6 class="fw-bold mb-2">Saldo (mês)</h6>
                    <span class="h4 fw-bold {{ 'text-success' if saldo >= 0 else 'text-warning' }}">R$ {{ "%.2f" % saldo }}</span>
                </div>
            </div>
        </div>
    </div>
</div>
<style>
.painel-atalho-card { transition: 0.2s ease; min-height: 140px; }
.painel-academia-dash .card { border-radius: 0.85rem; border-width: 2px; transition: 0.2s ease; }
.painel-academia-dash .card:hover, .painel-academia-dash .card-hover:hover { transform: translateY(-6px); box-shadow: 0 0.75rem 1.5rem rgba(0,0,0,0.18) !important; }
</style>
{% endblock %}
